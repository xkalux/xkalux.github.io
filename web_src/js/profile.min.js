let e, t, n; function a(a, o, s) { if (!s) return; o && (t = o), a && (e = a); const l = e(); if (!l) return function (e) { const t = document.createElement("p"); t.innerHTML = "Service not available please sign-in with google account", e.appendChild(t) }(s); const c = document.createElement("button"); c.innerHTML = "Refresh", s.querySelector("h2").appendChild(c); const d = document.createElement("div"); d.id = "profile-content", s.appendChild(d), c.addEventListener("click", (() => { !async function (e, a) { a.innerHTML = "<x-loading title='Fetching data'></x-loading>", await t.getSubjectList(e, (t => { if ("ok" === t.status) { const o = JSON.stringify(t.datas); localStorage.setItem(n, btoa(o)), i(e, a) } else a.innerHTML = `<div> Something went wrong! ðŸ˜¢</div>\n            <ul>\n            <li> Status: ${t.status}</li>\n            <li> Pleas contact @x-kalux on Discord</li>\n            </ul>` })) }(l, d) })), i(l, d) } function i(e, a) { const i = function (e) { return e ? n || (n = "classOF" + e.email.replace(".", "").replace("@rmuti.ac.th", ""), n) : "guest" }(e), s = localStorage.getItem(i); if (!s) { const d = document.createElement("p"); return d.innerHTML = "Data not found !\n        <ul>\n        <li> Click on 'Refresh' button.</li>\n        <li> Contact @x-kalux on Discord if data remains missing after refreshing.</li>\n        </ul>\n        ", void a.appendChild(d) } const l = JSON.parse(atob(s)); a.innerHTML = ""; for (let r = 0; r < l.length; r++) { const u = l[r], m = btoa(e + u.name), p = document.createElement("details"); p.classList.add("detail-of-subject-title"); const g = document.createElement("summary"), h = document.createElement("div"); if (g.textContent = u.name, h.innerHTML = `<x-loading title='Fetching ${u.name} data'></x-loading></div>`, p.appendChild(g), p.appendChild(h), sessionStorage.hasOwnProperty(m)) o(m, h); else { function c() { g.removeEventListener("click", c), t.getSubjecData(e, u, (e => { if ("ok" === e.status && null == e.datas.error) { const t = e.datas.datas, n = JSON.stringify(t); sessionStorage.setItem(m, n), o(m, h) } else h.innerHTML = `<div> Something went wrong! ðŸ˜¢</div>\n                            <ul>\n                            <li> Status: ${e.status}</li>\n                            <li> Pleas contact @x-kalux on Discord</li>\n                            </ul>` })) } g.addEventListener("click", c) } a.appendChild(p) } } function o(e, t) { const n = sessionStorage.getItem(e); if (n) { const e = document.createElement("div"); e.classList.add("subject-data-detail"); const a = JSON.parse(n); for (let t = 0; t < a.length; t++) { const n = a[t], i = document.createElement("details"); i.classList.add("detail-of-subject"); const o = document.createElement("summary"); o.textContent = n.sheetName, i.appendChild(o); for (let e = 0; e < n.data.length; e++) { if (n.header[e].toLowerCase().toString().includes("_hide")) continue; if (n.data[e].toString().length < 1) continue; const t = document.createElement("div"); t.classList.add("subject-record"); const a = document.createElement("span"); a.textContent = n.header[e]; const o = document.createElement("span"); o.innerHTML = n.data[e].toString().split("\\n").map((e => `<p>${e}</p>`)).join(""), t.appendChild(a), t.appendChild(o), i.appendChild(t) } e.appendChild(i) } t.innerHTML = "", t.appendChild(e) } } export { a as renderSubjectList }