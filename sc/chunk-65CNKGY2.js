import{a as O,b as u,c as j,d as y,e as f,f as E,g as P,h as B,i as N,j as k,k as F,l as D,m as I,n as q,o as w,p as W,q as $,r as V,s as G,t as R,u as L,v as J,w as K,x as Q}from"./chunk-PCW5WHPX.js";import{l as z,m as H}from"./chunk-VISZFO3F.js";import"./chunk-XAZLOLJU.js";import{Fb as m,Hb as b,Jb as C,Lb as h,Mb as T,Na as s,Oa as g,ab as l,da as v,eb as p,hb as c,j as _,lb as o,lc as A,mb as n,nb as S,nc as M,oc as x,tb as d}from"./chunk-4I4OMEW5.js";function X(a,e){a&1&&(o(0,"mat-error"),m(1,"\u0E08\u0E33\u0E19\u0E27\u0E19\u0E2A\u0E31\u0E1B\u0E14\u0E32\u0E2B\u0E4C\u0E17\u0E35\u0E48\u0E40\u0E23\u0E35\u0E22\u0E19 \u0E2D\u0E22\u0E39\u0E48\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07 10-15"),n())}function Y(a,e){a&1&&(o(0,"mat-error"),m(1,"\u0E08\u0E33\u0E19\u0E27\u0E19\u0E41\u0E1A\u0E1A\u0E17\u0E14\u0E2A\u0E2D\u0E1A 0 - 15"),n())}function Z(a,e){a&1&&(o(0,"mat-error"),m(1,"\u0E04\u0E30\u0E41\u0E19\u0E19\u0E2D\u0E22\u0E39\u0E48\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07 0-100"),n())}function ee(a,e){a&1&&(o(0,"mat-error"),m(1,"\u0E04\u0E30\u0E41\u0E19\u0E19\u0E2D\u0E22\u0E39\u0E48\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07 0-100"),n())}function te(a,e){a&1&&(o(0,"mat-error"),m(1,"\u0E04\u0E30\u0E41\u0E19\u0E19\u0E2D\u0E22\u0E39\u0E48\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07 0-100"),n())}function ne(a,e){a&1&&(o(0,"mat-error"),m(1,"\u0E04\u0E30\u0E41\u0E19\u0E19\u0E2D\u0E22\u0E39\u0E48\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07 0-100"),n())}function ie(a,e){if(a&1&&(o(0,"p"),m(1),n()),a&2){let i=e.ngIf;s(),b("Total Score: ",i," points")}}var U=class a{constructor(e){this._dataService=e;this._initForm()}form=new f({});totalScore$=new _(0);_initForm(){this.form=new f({}),this.form.addControl("numberOfWeek",new E(this._dataService.settings.numberOfWeek,[u.required,u.min(10),u.max(15)])),this.form.addControl("numberOfTest",new E(this._dataService.settings.numberOfTest,[u.required,u.min(1),u.max(15)])),this.form.addControl("attendsScore",new E(this._dataService.settings.AttendsScore,[u.required,u.min(0),u.max(100)])),this.form.addControl("actionsScore",new E(this._dataService.settings.ActionsScore,[u.required,u.min(0),u.max(100)])),this.form.addControl("testsScore",new E(this._dataService.settings.TestsScore,[u.required,u.min(0),u.max(100)])),this.form.addControl("projectScore",new E(this._dataService.settings.ProjectScore,[u.required,u.min(0),u.max(100)])),this.updateTotalScore()}updateTotalScore(){let e=this.form.controls.attendsScore.value+this.form.controls.actionsScore.value+this.form.controls.testsScore.value+this.form.controls.projectScore.value;this.totalScore$.next(e)}onReset(){this._dataService.ResetSetting(),this._initForm()}onSubmit(){let e={},i=this.form.controls.numberOfWeek.value||15;i>15&&(i=15),i<10&&(i=10),console.log("set numberOfWeek = "+i),this._dataService.settings.numberOfWeek=i;let t=this.form.controls.numberOfTest.value||7;this._dataService.settings.numberOfTest=t,this._setAttendsScore(e,i),this._setActionsScore(e,i),this._setTestScore(e,t),this._setProjectSCore(e),this._setBonusScore(e),this._dataService.studentScore=e,this._dataService.SaveSettings()}_setBonusScore(e){e.Bonus={},e.Bonus.bonus=this._dataService.studentScore.Project?.bonus||0}_setProjectSCore(e){let i=+this.form.controls.projectScore.value;i>=0&&(this._dataService.settings.ProjectScore=i,e.Project={},e.Project.project=this._dataService.studentScore.Project?.project||0)}_setTestScore(e,i){let t=+this.form.controls.testsScore.value;if(t>=0){this._dataService.settings.TestsScore=t,e.Tests={};for(let r=1;r<=i;r++)e.Tests[`${r}`]=this._dataService.studentScore.Tests?.[`${r}`]||null}}_setActionsScore(e,i){let t=+this.form.controls.actionsScore.value;if(t>=0){this._dataService.settings.ActionsScore=t,e.Actions={};for(let r=1;r<=i;r++)e.Actions[`${r}`]=this._dataService.studentScore.Actions?.[`${r}`]||null}}_setAttendsScore(e,i){let t=+this.form.controls.attendsScore.value;if(t>=0){this._dataService.settings.AttendsScore=t,e.Attends={};for(let r=1;r<=i;r++)e.Attends[`${r}`]=this._dataService.studentScore.Attends?.[`${r}`]||null}}static \u0275fac=function(i){return new(i||a)(g(Q))};static \u0275cmp=v({type:a,selectors:[["app-setting"]],standalone:!0,features:[C],decls:42,vars:11,consts:[["autocomplete","off",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","type","number","required","true","min","10","max","15","placeholder","\u0E08\u0E33\u0E19\u0E27\u0E19\u0E2A\u0E31\u0E1B\u0E14\u0E32\u0E2B\u0E4C\u0E17\u0E35\u0E48\u0E40\u0E23\u0E35\u0E22\u0E19 10 - 15","formControlName","numberOfWeek"],["matInput","","type","number","required","true","min","1","max","15","placeholder","\u0E08\u0E33\u0E19\u0E27\u0E19\u0E41\u0E1A\u0E1A\u0E17\u0E14\u0E2A\u0E2D\u0E1A 0 - 15","formControlName","numberOfTest"],["matInput","","type","number","required","true","min","0","max","100","placeholder","\u0E04\u0E30\u0E41\u0E19\u0E19 Attend 0 - 100","formControlName","attendsScore",3,"input"],["matInput","","type","number","required","true","min","0","max","100","placeholder","\u0E04\u0E30\u0E41\u0E19\u0E19 Action 0 - 100","formControlName","actionsScore",3,"input"],["matInput","","type","number","required","true","min","0","max","100","placeholder","\u0E04\u0E30\u0E41\u0E19\u0E19 Test 0 - 100","formControlName","testsScore",3,"input"],["matInput","","type","number","required","true","min","0","max","100","placeholder","\u0E04\u0E30\u0E41\u0E19\u0E19 Project 0 - 100","formControlName","projectScore",3,"input"],[4,"ngIf"],["mat-stroked-button","","type","button",3,"click"],["mat-stroked-button","","type","submit",3,"disabled"]],template:function(i,t){i&1&&(o(0,"div")(1,"mat-card")(2,"h2"),m(3,"Settings"),n(),o(4,"form",0),d("ngSubmit",function(){return t.onSubmit()}),o(5,"mat-form-field",1)(6,"mat-label"),m(7,"Number Of Weeks"),n(),S(8,"input",2),l(9,X,2,0,"mat-error"),n(),o(10,"mat-form-field",1)(11,"mat-label"),m(12,"Number Of Tests"),n(),S(13,"input",3),l(14,Y,2,0,"mat-error"),n(),o(15,"mat-form-field",1)(16,"mat-label"),m(17,"Attends Score"),n(),o(18,"input",4),d("input",function(){return t.updateTotalScore()}),n(),l(19,Z,2,0,"mat-error"),n(),o(20,"mat-form-field",1)(21,"mat-label"),m(22,"Actions Score"),n(),o(23,"input",5),d("input",function(){return t.updateTotalScore()}),n(),l(24,ee,2,0,"mat-error"),n(),o(25,"mat-form-field",1)(26,"mat-label"),m(27,"Tests Score"),n(),o(28,"input",6),d("input",function(){return t.updateTotalScore()}),n(),l(29,te,2,0,"mat-error"),n(),o(30,"mat-form-field",1)(31,"mat-label"),m(32,"Project Score"),n(),o(33,"input",7),d("input",function(){return t.updateTotalScore()}),n(),l(34,ne,2,0,"mat-error"),n(),l(35,ie,2,1,"p",8),h(36,"async"),o(37,"div")(38,"button",9),d("click",function(){return t.onReset()}),m(39,"Reset"),n(),o(40,"button",10),m(41,"Save"),n()()()()()),i&2&&(s(4),p("formGroup",t.form),s(5),c(t.form.controls.numberOfWeek.invalid?9:-1),s(5),c(t.form.controls.numberOfTest.invalid?14:-1),s(5),c(t.form.controls.attendsScore.invalid?19:-1),s(5),c(t.form.controls.actionsScore.invalid?24:-1),s(5),c(t.form.controls.testsScore.invalid?29:-1),s(5),c(t.form.controls.projectScore.invalid?34:-1),s(),p("ngIf",T(36,9,t.totalScore$)),s(5),p("disabled",t.form.invalid))},dependencies:[$,W,L,R,V,G,H,z,q,P,O,B,j,y,I,D,F,K,J,w,N,k,x,A,M],styles:["div[_ngcontent-%COMP%]{margin:2em 3em 1em}mat-card[_ngcontent-%COMP%]{display:block;padding:1em 2em .1em;align-items:center;width:100%}mat-form-field[_ngcontent-%COMP%]{display:block}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1em;display:flex;justify-content:flex-end}input[_ngcontent-%COMP%]{text-align:end}button[_ngcontent-%COMP%]{margin-left:1em}"]})};export{U as SettingComponent};
