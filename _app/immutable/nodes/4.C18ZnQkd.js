import{d as ot,f as $,e as lt,a as I,s as G}from"../chunks/CsIN25Ky.js";import{i as it}from"../chunks/PcqcHE3R.js";import{o as rt,a as ct}from"../chunks/BINHKKf2.js";import{z as dt,A as ut,B as mt,C as pt,E as c,F as n,G as M,H as ft,a as t,I as b,s as u,J as s,K as A}from"../chunks/BIYywunZ.js";import{i as q}from"../chunks/CRXV3zYL.js";import{s as D,a as vt}from"../chunks/Cx1DLMHF.js";import{s as bt}from"../chunks/BR23pSQo.js";import{s as T}from"../chunks/BnCyje76.js";var gt=$('<div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content shadow"><span class="countdown font-mono text-6xl"><span></span></span> <span class="text-xs tracking-wide opacity-80">min</span></div>'),xt=$('<div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content shadow"><span class="countdown font-mono text-6xl"><span></span></span> <span class="text-xs tracking-wide opacity-80">sec</span></div>'),_t=$('<textarea id="textarea" class="thai-lang text-accent-content textarea text-4xl leading-relaxed font-semibold flex-1 min-h-0 w-full resize-none overflow-y-hidden border-none hover:box-border"></textarea> <div class="fixed top-20 right-4 z-50"><div class="grid grid-flow-col auto-cols-max gap-3 text-center transition-transform duration-300"><!> <!></div></div> <div class="fab"><div tabindex="0" role="button" class="btn btn-lg btn-circle mb-15"><span class="icon material-symbols-outlined" aria-hidden="true">settings</span></div> <button><span class="material-symbols-outlined"> </span> </button> <button class="btn btn-sm btn-error w-full gap-2" aria-label="รีเซ็ตเวลาเป็น 00:00"><span class="material-symbols-outlined">restart_alt</span> Reset (00 00)</button> <button class="btn btn-sm w-full gap-2" aria-label="เพิ่ม 1 นาที"><span class="material-symbols-outlined">add</span> 1 min</button> <button class="btn btn-sm w-full gap-2" aria-label="เพิ่ม 5 นาที"><span class="material-symbols-outlined">add</span> 5 min</button></div> <dialog id="timeoutModal" class="modal"><div class="modal-box"><h3 class="font-bold text-lg">⏰ หมดเวลาแล้ว</h3> <p class="py-2">ตัวจับเวลาสิ้นสุดลง (00:00)</p> <div class="modal-action"><form method="dialog"><button class="btn btn-primary">ตกลง</button></form></div></div> <form method="dialog" class="modal-backdrop"><button aria-label="Close">close</button></form></dialog>',1);function $t(F,J){dt(J,!1);let K,o=b(0),i=b(0),r=b(!1),f=null;function O(){t(r)||(u(r,!0),f=setInterval(N,1e3))}function g(){u(r,!1),f!==null&&(clearInterval(f),f=null)}function j(){t(r)?g():O()}function L(){g(),u(o,0),u(i,0)}function B(a){u(o,Math.max(0,t(o)+a))}function N(){if(t(o)===0&&t(i)===0){g(),U(),P();return}t(i)>0?u(i,t(i)-1):t(o)>0&&(u(o,t(o)-1),u(i,59))}function P(){document.getElementById("timeoutModal")?.showModal()}function Q(){document.getElementById("timeoutModal")?.close()}function U(){const a=window.AudioContext||window.webkitAudioContext,e=new a,l=e.createOscillator(),d=e.createGain();l.type="sine",l.frequency.value=880,l.connect(d),d.connect(e.destination);const p=e.currentTime;d.gain.setValueAtTime(1e-4,p),d.gain.exponentialRampToValueAtTime(.3,p+.02),l.start(p),d.gain.exponentialRampToValueAtTime(1e-4,p+1.2),l.stop(p+1.25)}rt(()=>{clearInterval(K)});let v=b("");ct(()=>{u(v,D.action.load())});function W(){const a=document.getElementById("textarea");D.action.save(a.value)}function X(a){const e=a.target;e.style.height="auto",e.style.height=e.scrollHeight+"px"}ut(()=>t(v),()=>{if(t(v)){const a=document.getElementById("textarea");a.value=t(v),a.style.height="auto",a.style.height=a.scrollHeight+"px"}}),mt(),it();var C=_t(),x=pt(C);x.__input=X;var _=c(x,2),h=n(_),E=n(h);{var Y=a=>{var e=gt(),l=n(e),d=n(l);s(l),A(2),s(e),M(()=>T(d,`--value:${t(o)??""}; --digits: 2;`)),I(a,e)};q(E,a=>{t(o)>0&&a(Y)})}var Z=c(E,2);{var tt=a=>{var e=xt(),l=n(e),d=n(l);s(l),A(2),s(e),M(()=>T(d,`--value:${t(i)??""}; --digits: 2;`)),I(a,e)};q(Z,a=>{t(o)>0&&t(i)>0&&a(tt)})}s(h),s(_);var y=c(_,2),m=c(n(y),2);m.__click=j;var w=n(m),at=n(w,!0);s(w);var et=c(w);s(m);var k=c(m,2);k.__click=L;var z=c(k,2);z.__click=()=>B(1);var nt=c(z,2);nt.__click=()=>B(5),s(y);var R=c(y,2),H=n(R),S=c(n(H),4),V=n(S),st=n(V);st.__click=Q,s(V),s(S),s(H),A(2),s(R),M(()=>{T(h,`transform: scale(${t(r)?2:1}); transform-origin: top right;`),bt(m,1,`btn btn-sm w-full gap-2 ${t(r)?"btn-warning":"btn-success"}`),m.disabled=t(o)===0&&t(i)===0,vt(m,"aria-label",t(r)?"หยุดเวลา":"เริ่มนับถอยหลัง"),G(at,t(r)?"stop":"play_arrow"),G(et,` ${t(r)?"Stop":"Start"}`),k.disabled=t(r)||t(o)===0&&t(i)===0}),lt("blur",x,W),I(F,C),ft()}ot(["input","click"]);export{$t as component};
